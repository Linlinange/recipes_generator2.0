graph TD
    %% ========== UI Layer (Pages) ==========
    subgraph "Pages"
        GeneratorPage
        SettingsPage
        LocalizerPage
        HomePage
    end

    %% ========== Service Layer ==========
    subgraph "Services"
        GeneratorService
        SettingsService
        LocalizerService
        HomeService
    end

    %% ========== Core/Infrastructure Layer ==========
    subgraph "Core Components"
        ReplacementEngine
        LocalizationEngine_未实现
        ConfigDAO
        OutputWriter
        TemplateLoader
    end

    %% ========== Domain Models ==========
    Config
    Template
    
    %% ========== External ==========
    File[(File System)]

    %% 1. Page -> Service: 主责调用（实线）
    GeneratorPage --> GeneratorService
    SettingsPage --> SettingsService
    LocalizerPage --> LocalizerService
    HomePage --> HomeService
    
    %% 2. Service -> Service: 依赖注入/配置同步（虚线）
    GeneratorService -.-> |"获取配置"| SettingsService
    LocalizerService -.-> |"获取配置"| SettingsService
    
    %% 3. Service -> Core（实线）
    GeneratorService --> ReplacementEngine
    GeneratorService --> TemplateLoader
    GeneratorService --> OutputWriter
    
    SettingsService --> ConfigDAO
    
    LocalizerService --> LocalizationEngine_未实现
    LocalizerService --> TemplateLoader
    LocalizerService --> OutputWriter
    
    %% 4. Core -> Models & File（实线）
    ConfigDAO --> Config
    ConfigDAO --> File
    OutputWriter --> File
    TemplateLoader --> File
    TemplateLoader --> Template

    %% 样式定义
    style GeneratorPage fill:#dad,stroke:#333,stroke-width:2px
    style SettingsPage fill:#dad,stroke:#333,stroke-width:2px
    style LocalizerPage fill:#dad,stroke:#333,stroke-width:2px
    style HomePage fill:#dad,stroke:#333,stroke-width:2px

    style GeneratorService fill:#aaf,stroke:#333,stroke-width:2px
    style LocalizerService fill:#aaf,stroke:#333,stroke-width:2px
    style SettingsService fill:#aaf,stroke:#333,stroke-width:2px
    style HomeService fill:#aaf,stroke:#333,stroke-width:2px
    
    style ReplacementEngine fill:#ccf,stroke:#333,stroke-width:1px
    style LocalizationEngine_未实现 fill:#ccf,stroke:#333,stroke-width:1px
    style ConfigDAO fill:#ccf,stroke:#333,stroke-width:1px
    style OutputWriter fill:#ccf,stroke:#333,stroke-width:1px
    style TemplateLoader fill:#ccf,stroke:#333,stroke-width:1px
    
    %% 图例说明
    subgraph "Legend"
        direction LR
        solid["实线：直接调用"] 
        dash["虚线：依赖注入"]
    end
    style solid fill:#fff,stroke:#333,stroke-width:2px
    style dash fill:#fff,stroke:#333,stroke-width:2px,stroke-dasharray: 5 5